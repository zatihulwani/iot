{"remainingRequest":"/Applications/XAMPP/xamppfiles/htdocs/contoh/node_modules/babel-loader/lib/index.js!/Applications/XAMPP/xamppfiles/htdocs/contoh/node_modules/eslint-loader/index.js??ref--13-0!/Applications/XAMPP/xamppfiles/htdocs/contoh/src/router.js","dependencies":[{"path":"/Applications/XAMPP/xamppfiles/htdocs/contoh/src/router.js","mtime":1554889763991},{"path":"/Applications/XAMPP/xamppfiles/htdocs/contoh/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/contoh/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/contoh/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import Vue from 'vue';\nimport Router from 'vue-router';\nimport Home from './views/Home.vue';\nimport AdminPanel from './views/Admin.vue';\nimport Error404 from './views/404.vue';\nimport Setting from './views/Setting.vue'; // import Field from './views/Field.vue';\n\nVue.use(Router);\nvar instanceRouter = new Router({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: [{\n    path: '/',\n    name: 'home',\n    component: Home,\n    meta: {\n      guest: true\n    }\n  }, {\n    path: '/login',\n    name: 'login',\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: function component() {\n      return import(\n      /* webpackChunkName: \"about\" */\n      './views/Login.vue');\n    },\n    meta: {\n      guest: false\n    }\n  }, {\n    path: '/user',\n    name: 'user',\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: function component() {\n      return import(\n      /* webpackChunkName: \"about\" */\n      './views/User.vue');\n    },\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: '/admin',\n    name: 'admin',\n    component: AdminPanel,\n    meta: {\n      requiresAuth: true,\n      isAdmin: true\n    }\n  }, {\n    path: '/field',\n    name: 'field',\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: function component() {\n      return import(\n      /* webpackChunkName: \"about\" */\n      './views/Field.vue');\n    },\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: '/setting',\n    name: 'setting',\n    component: Setting,\n    //check per route\n    beforeEnter: function beforeEnter(to, from, next) {\n      var dpt = getProfile();\n\n      if (dpt == null) {\n        next('/login');\n      } else {\n        if (dpt.role.id == 1) {\n          next(function (vm) {\n            vm.tampilkanAlertDariRoute('ini dari router');\n          });\n        } else {\n          next({\n            name: 'login'\n          });\n        }\n      }\n    }\n  }, {\n    path: '*',\n    name: 'notfound',\n    component: Error404\n  }]\n});\n\nfunction getToken() {\n  if (localStorage.getItem('token') == null) {\n    return null;\n  } else {\n    return JSON.parse(localStorage.getItem('token'));\n  }\n}\n\nfunction getProfile() {\n  return JSON.parse(localStorage.getItem('profile'));\n}\n\nfunction getField() {\n  return JSON.parse(localStorage.getItem('field'));\n} //check global\n//navigation guard, check before entering route\n\n\ninstanceRouter.beforeEach(function (to, from, next) {\n  if (to.matched.some(function (record) {\n    return record.meta.requiresAuth;\n  })) {\n    if (getToken() == null) {\n      next({\n        path: '/login',\n        query: {\n          redirect: to.fullPath\n        }\n      });\n      console.log('saved redirect = ', to.fullPath);\n    } else {\n      var user = getProfile();\n\n      if (to.matched.some(function (record) {\n        return record.meta.isAdmin;\n      })) {\n        if (user.role.id == 1) {\n          next();\n        } else {\n          next({\n            name: 'user'\n          });\n        }\n      } else {\n        next();\n      }\n    }\n  } else if (to.matched.some(function (record) {\n    return record.meta.guest;\n  })) {\n    if (getToken() == null) {\n      next();\n    } else {\n      next({\n        name: 'user'\n      });\n    }\n  } else {\n    next();\n  }\n});\nexport default instanceRouter;",{"version":3,"sources":["/Applications/XAMPP/xamppfiles/htdocs/contoh/src/router.js"],"names":["Vue","Router","Home","AdminPanel","Error404","Setting","use","instanceRouter","mode","base","process","env","BASE_URL","routes","path","name","component","meta","guest","requiresAuth","isAdmin","beforeEnter","to","from","next","dpt","getProfile","role","id","vm","tampilkanAlertDariRoute","getToken","localStorage","getItem","JSON","parse","getField","beforeEach","matched","some","record","query","redirect","fullPath","console","log","user"],"mappings":"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","sourcesContent":["import Vue from 'vue';\nimport Router from 'vue-router';\nimport Home from './views/Home.vue';\nimport AdminPanel from './views/Admin.vue';\nimport Error404 from './views/404.vue';\nimport Setting from './views/Setting.vue';\n// import Field from './views/Field.vue';\n\nVue.use(Router);\n\nlet instanceRouter = new Router({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: [{\n      path: '/',\n      name: 'home',\n      component: Home,\n      meta: {\n        guest: true\n      }\n    },\n    {\n      path: '/login',\n      name: 'login',\n      // route level code-splitting\n      // this generates a separate chunk (about.[hash].js) for this route\n      // which is lazy-loaded when the route is visited.\n      component: () => import( /* webpackChunkName: \"about\" */ './views/Login.vue'),\n      meta: {\n        guest: false\n      }\n    },\n    {\n      path: '/user',\n      name: 'user',\n      // route level code-splitting\n      // this generates a separate chunk (about.[hash].js) for this route\n      // which is lazy-loaded when the route is visited.\n      component: () => import( /* webpackChunkName: \"about\" */ './views/User.vue'),\n      meta: {\n        requiresAuth: true,\n      },\n    },\n    {\n      path: '/admin',\n      name: 'admin',\n      component: AdminPanel,\n      meta: {\n        requiresAuth: true,\n        isAdmin: true\n      }\n    },\n    {\n      path: '/field',\n      name: 'field',\n      // route level code-splitting\n      // this generates a separate chunk (about.[hash].js) for this route\n      // which is lazy-loaded when the route is visited.\n      component: () => import( /* webpackChunkName: \"about\" */ './views/Field.vue'),\n      meta: {\n        requiresAuth: true,\n      },\n    },\n    {\n      path: '/setting',\n      name: 'setting',\n      component: Setting,\n      //check per route\n      beforeEnter(to, from, next) {\n        var dpt = getProfile();\n        if (dpt == null) {\n          next('/login');\n        } else {\n          if (dpt.role.id == 1) {\n            next(vm => {\n              vm.tampilkanAlertDariRoute('ini dari router');\n            });\n          } else {\n            next({\n              name: 'login'\n            });\n          }\n        }\n      }\n    },\n    {\n      path: '*',\n      name: 'notfound',\n      component: Error404\n    }\n  ]\n});\n\nfunction getToken() {\n  if (localStorage.getItem('token') == null) {\n    return null;\n  } else {\n    return JSON.parse(localStorage.getItem('token'));\n  }\n}\n\nfunction getProfile() {\n  return JSON.parse(localStorage.getItem('profile'));\n}\nfunction getField() {\n  return JSON.parse(localStorage.getItem('field'));\n}\n\n//check global\n//navigation guard, check before entering route\ninstanceRouter.beforeEach((to, from, next) => {\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (getToken() == null) {\n      next({\n        path: '/login',\n        query: {\n          redirect: to.fullPath\n        }\n      });\n      console.log('saved redirect = ', to.fullPath);\n    } else {\n      let user = getProfile();\n      if (to.matched.some(record => record.meta.isAdmin)) {\n        if (user.role.id == 1) {\n          next();\n        } else {\n          next({\n            name: 'user'\n          });\n        }\n      } else {\n        next();\n      }\n    }\n  } else if (to.matched.some(record => record.meta.guest)) {\n    if (getToken() == null) {\n      next();\n    } else {\n      next({\n        name: 'user'\n      });\n    }\n  } else {\n    next();\n  }\n});\n\nexport default instanceRouter;\n"]}]}